<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="keywords" content="youtube, twitch, videos, creators, bj, 인방, 유튜브, 트위치, 동영상">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>moagram</title>

        <link rel="icon" type="image/png" href="/icons/moagram_logo_moa_head.png" sizes="16x16">
        <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

        <!-- SEMANTIC UI -->
        <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css"/> -->

        <!-- CSS FILES -->
        <link rel="stylesheet" type="text/css" href="/stylesheets/main.css">
        <link rel="stylesheet" type="text/css" href="/stylesheets/home.css">
        <link rel="stylesheet" type="text/css" href="/stylesheets/content.css">
        <link rel="stylesheet" type="text/css" href="/stylesheets/profile.css">

        <!-- SOCKET IO SCRIPT -->
        <script type="text/javascript" src="/clientJs/clientJs.js"></script>

        <!-- SOCKET IO SCRIPT -->
        <script type="text/javascript" src="/socket.io/socket.io.js"></script>
        
    </head>
    <body>
        <div id='main-nav'>
            <nav class="navbar navbar-expand-lg navbar-light">
                <a class="navbar-brand" href="/">
                    <img src="/icons/moagram_logo_moa.png" width="30px" height="30px"> Moagram
                </a>

                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                        <li class="nav-item d-lg-none" id="main-nav-item">
                            <a style="height: 43px;" class="btn btn-default btn-sm" id="btn-default" href="/about">
                                <strong><h5 style="margin-bottom: 0px; padding-top: 5px;">
                                    M<img class="roundImage" style="padding-bottom: 3px; padding-right: 1px; padding-left: 1px;" src="/icons/moagram_logo_moa_head.png" width="21px" height="21px"/>A
                                </h5></strong>
                            </a>
                        </li> 
                        
                        <li class="nav-item d-none d-lg-block" id="main-nav-item">
                            <a style="height: 43px;" class="btn btn-default btn-sm" id="btn-default" href="/about">
                                <strong><h5 style="margin-bottom: 0px; padding-top: 5px;">
                                    M<img class="roundImage" style="padding-bottom: 3px; padding-right: 1px; padding-left: 1px;" src="/icons/moagram_logo_moa_head.png" width="21px" height="21px"/>A
                                </h5></strong>
                            </a>
                        </li>

                        <li class="nav-item" id="main-nav-item">
                            <a class="btn btn-default btn-sm" id="btn-default" href="/contents/new">
                                <h5 style="margin-bottom: 0px;">
                                    새로운 포스트 
                                    <img id="nav-icons" width="35" height="33" src="/icons/youtube.png">
                                    <img id="nav-icons" width="35" height="33" src="/icons/icons8-twitch-48.png">
                                </h5>
                            </a>
                        </li>
                    </ul>
                    
                    <!-- ======== Search bar ======== -->
                    <% if(user){ %>
                        <% if(pageType == 'index'){ %>
                            <% if(ctg != 0){ %>
                                <% if(sort != 0){ %>
                                    <form action="/contents" method="GET" style="padding-right: 30px;" class="form-inline nav-item" >
                                        <input type='hidden' name="category" value="<%= ctg %>">
                                        <input type='hidden' name="sort" value="<%= sort %>">
                                        <input id="search-bar" type="text" name="search" placeholder="Search" class="form-control mr-sm-2">
                                    </form>
                                <% } else { %>
                                    <form action="/contents" method="GET" style="padding-right: 30px;" class="form-inline nav-item" >
                                        <input type='hidden' name="category" value="<%= ctg %>">
                                        <input id="search-bar" type="text" name="search" placeholder="Search" class="form-control mr-sm-2">
                                    </form>
                                <% } %>
                            <% } else { %>
                                <% if(sort != 0){ %>
                                    <form action="/contents" method="GET" style="padding-right: 30px;" class="form-inline nav-item" >
                                        <input type='hidden' name="sort" value="<%= sort %>">
                                        <input id="search-bar" type="text" name="search" placeholder="Search" class="form-control mr-sm-2">
                                    </form>
                                <% } else { %>
                                    <form action="/contents" method="GET" style="padding-right: 30px;" class="form-inline nav-item" >
                                        <input id="search-bar" type="text" name="search" placeholder="Search" class="form-control mr-sm-2">
                                    </form>
                                <% } %>
                            <% } %>
                        <% } else if (pageType == 'profile'){ %> 
                            <form action="/contents" method="GET" style="padding-right: 30px;" class="form-inline nav-item" >
                                <input type='hidden' id="search-bar" type="text" name="search" placeholder="Search" class="form-control mr-sm-2">
                            </form>
                        <% } else { %>
                            <form action="/contents" method="GET" style="padding-right: 30px;" class="form-inline nav-item" >
                                <input id="search-bar" type="text" name="search" placeholder="Search" class="form-control mr-sm-2">
                            </form>
                        <% } %>
                    <% } %> 
                    
                    <% if (!user) { %>
                        <div class="nav-item">
                            <a href="/auth/google" class="btn btn-default btn-sm d-lg-none" id="btn-default"><img id="nav-icons" src="/icons/google_logo.png" width="28px" height="25px" />로그인</a>
                            <a href="/auth/google" class="btn btn-default btn-sm d-none d-lg-block" id="btn-default">로그인하기&nbsp; <img src="/icons/google_logo.png" width="25px" height="25px" /></a>
                        </div>
                    <% } else { %>
                        <div class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" style="padding-left: 0px;" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
                                <img style="border-radius: 5px;" src= "<%= user.thumbnail %>" width= "45px" height= "45px" />&nbsp;
                                <strong><%= user.username %></strong>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right">
                                <a class="nav-link" href="/profile"> 
                                    <strong><%= user.username %></strong>
                                </a>
                                 
                                <a class="nav-link" href="/profile/setting"> 
                                    <strong>프로필 설정</strong>
                                </a>
                                <div class="dropdown-divider"></div>
                                <a class="nav-link" href="/auth/logout"><h6>로그아웃</h6></a>
                            </div>
                        </div>                 
                    <% } %>
                </div>             
            </nav>
        </div>
        <!-- Category Navigation Bar -->
        <div id="ctg-nav">
          <form action="/contents" method="GET" class="form-group">
            <ul class="nav nav-tabs">
                <li class="nav-item">
                    <a class="nav-link active" href="/contents"><img class="headerNavIconSize" id="cat-icons" src="/icons/icons8-check-all-60.png"/> All</a>
                </li>
                <li class="nav-item"> 
                    <button class="nav-link active" name="category" value='tntl'><img class="headerNavIconSize" id="cat-icons" src="/icons/icons8-lol-64.png"> 웃긴영상 | TNT
                        <span class="badge badge-pill badge-secondary"><%=totalCtgCount[0]%></span>
                        <% if (ctgCount[0] > 0){ %>
                        <span class="badge badge-pill badge-upCount"><%=ctgCount[0]%></span>
                        <% } %>
                    </button>
                </li>
                <li class="nav-item"> 
                    <button class="nav-link active" name="category" value='mukbang'><img class="headerNavIconSize" id="cat-icons" src="/icons/icons8-noodles-48.png"> 먹방
                        <span class="badge badge-pill badge-secondary"><%=totalCtgCount[1]%></span>
                        <% if (ctgCount[1] > 0){ %>
                        <span class="badge badge-pill badge-upCount"><%=ctgCount[1]%></span>
                        <% } %>
                    </button>
                </li>
                <li class="nav-item"> 
                    <button class="nav-link active" name="category" value='news'><img class="headerNavIconSize" id="cat-icons" src="/icons/icons8-about-64.png"> News
                        <span class="badge badge-pill badge-secondary"><%=totalCtgCount[2]%></span>
                        <% if (ctgCount[2] > 0){ %>
                        <span class="badge badge-pill badge-upCount"><%=ctgCount[2]%></span>
                        <% } %>
                    </button>
                </li>
                <li class="nav-item"> 
                    <button class="nav-link active" name="category" value='documentary'><img class="headerNavIconSize" id="cat-icons" src="/icons/icons8-documentary-64.png"> 다큐
                        <span class="badge badge-pill badge-secondary"><%=totalCtgCount[3]%></span>
                        <% if (ctgCount[3] > 0){ %>
                        <span class="badge badge-pill badge-upCount"><%=ctgCount[3]%></span>
                        <% } %>
                    </button>
                </li>
                <li class="nav-item"> 
                    <button class="nav-link active" name="category" value='educational'><img class="headerNavIconSize" id="cat-icons" src="/icons/icons8-learning-50.png"> 교육
                        <span class="badge badge-pill badge-secondary"><%=totalCtgCount[4]%></span>
                        <% if (ctgCount[4] > 0){ %>
                        <span class="badge badge-pill badge-upCount"><%=ctgCount[4]%></span>
                        <% } %>
                    </button>
                </li>
                <li class="nav-item"> 
                    <button class="nav-link active" name="category" value='fitness'><img class="headerNavIconSize" id="cat-icons" src="/icons/icons8-squats-60.png"> 운동
                        <span class="badge badge-pill badge-secondary"><%=totalCtgCount[5]%></span>
                        <% if (ctgCount[5] > 0){ %>
                        <span class="badge badge-pill badge-upCount"><%=ctgCount[5]%></span>
                        <% } %>
                    </button>
                </li>
                <li class="nav-item"> 
                    <button class="nav-link active" name="category" value='motivational'><img class="headerNavIconSize" id="cat-icons" src="/icons/icons8-syringe-60.png"> 동기부여
                        <span class="badge badge-pill badge-secondary"><%=totalCtgCount[6]%></span>
                        <% if (ctgCount[6] > 0){ %>
                        <span class="badge badge-pill badge-upCount"><%=ctgCount[6]%></span>
                        <% } %>
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link active" name="category" value='music'><img class="headerNavIconSize" id="cat-icons" src="/icons/icons8-music-library-60.png"/> 뮤직
                        <span class="badge badge-pill badge-secondary"><%=totalCtgCount[7]%></span>
                        <% if (ctgCount[7] > 0){ %>
                        <span class="badge badge-pill badge-upCount"><%=ctgCount[7]%></span>
                        <% } %>
                    </button>
                </li>
                <li class="nav-item"> 
                    <button class="nav-link active" name="category" value='beauty'><img class="headerNavIconSize" id="cat-icons" src="/icons/icons8-lipstick-60.png"> 뷰티
                        <span class="badge badge-pill badge-secondary"><%=totalCtgCount[8]%></span>
                        <% if (ctgCount[8] > 0){ %>
                        <span class="badge badge-pill badge-upCount"><%=ctgCount[8]%></span>
                        <% } %>
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link active" name="category" value='gaming'><img class="headerNavIconSize" id="cat-icons" src="/icons/icons8-accuracy-60.png"/> 게임
                        <span class="badge badge-pill badge-secondary"><%=totalCtgCount[9]%></span>
                        <% if (ctgCount[9] > 0){ %>
                        <span class="badge badge-pill badge-upCount"><%=ctgCount[9]%></span>
                        <% } %>
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link active" name="category" value='vlog'><img class="headerNavIconSize"id="cat-icons" src="/icons/icons8-selfie-100.png"/> VLOG | 브이로그
                        <span class="badge badge-pill badge-secondary"><%=totalCtgCount[10]%></span>
                        <% if (ctgCount[10] > 0){ %>
                        <span class="badge badge-pill badge-upCount"><%=ctgCount[10]%></span>
                        <% } %>
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link active" name="category" value='animal'><img class="headerNavIconSize" id="cat-icons" 
                        src='/icons/icons8-pig-100.png' onmouseover="this.src='/icons/icons8-pinkpig-100.png';" onmouseout="this.src='/icons/icons8-pig-100.png';"/> 동물
                        <span class="badge badge-pill badge-secondary"><%=totalCtgCount[11]%></span>
                        <% if (ctgCount[11] > 0){ %>
                        <span class="badge badge-pill badge-upCount"><%=ctgCount[11]%></span>
                        <% } %>
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link active" name="category" value='others'><img class="headerNavIconSize" id="cat-icons" src="/icons/icons8-xd-50.png"/> Others
                        <span class="badge badge-pill badge-secondary"><%=totalCtgCount[12]%></span>
                        <% if (ctgCount[12] > 0){ %>
                        <span class="badge badge-pill badge-upCount"><%=ctgCount[12]%></span>
                        <% } %>
                    </button>
                </li>
            </ul>
          </form>
        </div>

        <!-- ========flash npm======== -->
        <div class="flash-box">
            <% if(error && error.length > 0) { %>
                <div style="text-align: center;" class="alert alert-danger"><p><%=error %></p></div>
            <% } %>

            <% if(success && success.length > 0) { %>
                <div style="text-align: center;" class="alert alert-success"><p><%= success %></p></div>
            <% } %>
        </div>

        <!-- MOMENTJS SCRIPT -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>

        <!-- =====ckeditor====== -->
        <script src="//cdn.ckeditor.com/4.6.2/standard/ckeditor.js"></script>