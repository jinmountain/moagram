<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="keywords" content="youtube, twitch, videos, creators, bj, 인방, 유튜브, 트위치, 동영상">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>moagram</title>

        <link rel="icon" type="image/png" href="/icons/moa-picture-favicon.png" sizes="16x16">
        <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
        
        <link rel="stylesheet" type="text/css" href="/stylesheets/main.css">
        <link rel="stylesheet" type="text/css" href="/stylesheets/home.css">
        <link rel="stylesheet" type="text/css" href="/stylesheets/content.css">
        <link rel="stylesheet" type="text/css" href="/stylesheets/profile.css">

        <!-- SOCKET IO SCRIPT -->
        <script type="text/javascript" src="/socket.io/socket.io.js"></script>
        <script type="text/javascript" src="/clientjs/showClient.js"></script>

    </head>
    <body>
        <div id='main-nav'>
            <nav class="navbar navbar-expand-lg navbar-light">
                <a class="navbar-brand" href="/">
                    <img src="/icons/moa-picture-favicon.png" width="30px" height="30px"> Moagram
                </a>

                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                        <li class="nav-item d-lg-none" id="main-nav-item">
                            <a style="height: 43px;" class="btn btn-default btn-sm" id="btn-default" href="/about">
                                <strong><h5 style="margin-bottom: 0px; padding-top: 5px;">
                                    M<img class="roundImage" style="padding-bottom: 3px;" src="/icons/moa-picture.png" width="18px" height="21px"/>A
                                </h5></strong>
                            </a>
                        </li> 
                        
                        <li class="nav-item d-none d-lg-block" id="main-nav-item">
                            <a style="height: 43px;" class="btn btn-default btn-sm" id="btn-default" href="/about">
                                <strong><h5 style="margin-bottom: 0px; padding-top: 5px;">
                                    M<img class="roundImage" style="padding-bottom: 3px;" src="/icons/moa-picture.png" width="18px" height="21px"/>A
                                </h5></strong>
                            </a>
                        </li>

                        <li class="nav-item" id="main-nav-item">
                            <a class="btn btn-default btn-sm" id="btn-default" href="/contents/new">
                                <h5 style="margin-bottom: 0px;">
                                    <img style="width: 20px; height: 20px;" src="/icons/icons8-c-52.png"/>REATE 
                                    <img style="width: 20px; height: 20px;" src="/icons/icons8-p-52.png"/>OST 
                                    <img id="nav-icons" width="35" height="33" src="/icons/youtube.png">
                                    <img id="nav-icons" width="35" height="33" src="/icons/icons8-twitch-48.png">
                                </h5>
                            </a>
                        </li>
                    </ul>
                    
                    <!-- ======== Search bar ======== -->
                    <% if(user){ %>
                        <!-- ======== Old Search bar ======== -->
                        <!-- <input id="search-bar" type="text" name="headerSearch" onkeypress="if (event.keyCode == 13) { try{window.location.href='/contents/search/'+ document.getElementsByName('headerSearch')[0].value; document.getElementsByName('headerSearch')[0].value=''; return false;}catch(e){} }" placeholder="Search" class="form-control mr-sm-2"> -->

                        <% if(pageType == 'index'){ %>
                            <% if(ctg != 0){ %>
                                <% if(sort != 0){ %>
                                    <form action="/contents" method="GET" style="padding-right: 30px;" class="form-inline nav-item" >
                                        <input type='hidden' name="category" value="<%= ctg %>">
                                        <input type='hidden' name="sort" value="<%= sort %>">
                                        <input id="search-bar" type="text" name="search" placeholder="Search" class="form-control mr-sm-2">
                                    </form>
                                <% } else { %>
                                    <form action="/contents" method="GET" style="padding-right: 30px;" class="form-inline nav-item" >
                                        <input type='hidden' name="category" value="<%= ctg %>">
                                        <input id="search-bar" type="text" name="search" placeholder="Search" class="form-control mr-sm-2">
                                    </form>
                                <% } %>
                            <% } else { %>
                                <% if(sort != 0){ %>
                                    <form action="/contents" method="GET" style="padding-right: 30px;" class="form-inline nav-item" >
                                        <input type='hidden' name="sort" value="<%= sort %>">
                                        <input id="search-bar" type="text" name="search" placeholder="Search" class="form-control mr-sm-2">
                                    </form>
                                <% } else { %>
                                    <form action="/contents" method="GET" style="padding-right: 30px;" class="form-inline nav-item" >
                                        <input id="search-bar" type="text" name="search" placeholder="Search" class="form-control mr-sm-2">
                                    </form>
                                <% } %>
                            <% } %>
                        <% } else if (pageType == 'profile'){ %> 
                            <form action="/contents" method="GET" style="padding-right: 30px;" class="form-inline nav-item" >
                                <input type='hidden' id="search-bar" type="text" name="search" placeholder="Search" class="form-control mr-sm-2">
                            </form>
                        <% } else { %>
                            <form action="/contents" method="GET" style="padding-right: 30px;" class="form-inline nav-item" >
                                <input id="search-bar" type="text" name="search" placeholder="Search" class="form-control mr-sm-2">
                            </form>
                        <% } %>
                    <% } %> 
                    
                    <% if (!user) { %>
                        <div class="nav-item">
                            <a href="/auth/google" class="btn btn-default btn-sm d-lg-none" id="btn-default"><img id="nav-icons" src="/icons/google_logo.png" width="28px" height="25px" /><strong>Login</strong></a>
                            <a href="/auth/google" class="btn btn-default btn-sm d-none d-lg-block" id="btn-default"><strong>Login with&nbsp; </strong><img src="/icons/google_logo.png" width="25px" height="25px" /></a>
                        </div>
                    <% } else { %>
                        <div class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" style="padding-left: 0px;" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
                                <img style="border-radius: 5px;" src= "<%= user.thumbnail %>" width= "45px" height= "45px" />&nbsp;
                                <strong><%= user.username %></strong>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right">
                                <a class="nav-link" href="/profile"> 
                                    <strong><%= user.username %></strong>
                                </a>
                                 
                                <a class="nav-link" href="/profile/setting"> 
                                    <strong>Setting</strong>
                                </a>
                                <div class="dropdown-divider"></div>
                                <a class="nav-link" href="/auth/logout"><h6>Logout</h6></a>
                            </div>
                        </div>                 
                    <% } %>
                </div>             
            </nav>
        </div>

        <div id="ctg-nav">
            <form action="/contents" method="GET" class="form-group">
                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <a class="nav-link active" href="/contents"><img height="35" width="35" id="cat-icons" src="/icons/icons8-check-all-60.png"/> All</a>
                    </li>
                    <li class="nav-item"> 
                        <button class="nav-link active" name='category' value='tntl'><img height="35" width="35" id="cat-icons" src="/icons/icons8-lol-64.png"> TNTL | 웃긴영상 
                            <span class="badge badge-pill badge-secondary"><%=ctgCount[0]%></span>
                        </button>
                    </li>
                    <li class="nav-item"> 
                        <button class="nav-link active" name='category' value='mukbang'><img height="35" width="35" id="cat-icons" src="/icons/icons8-noodles-48.png"> Mukbang | 먹방
                            <span class="badge badge-pill badge-secondary"><%=ctgCount[1]%></span>
                        </button>
                    </li>
                    <li class="nav-item"> 
                        <button class="nav-link active" name='category' value='news'><img height="35" width="35" id="cat-icons" src="/icons/icons8-about-64.png"> News
                            <span class="badge badge-pill badge-secondary"><%=ctgCount[2]%></span>
                        </button>
                    </li>
                    <li class="nav-item"> 
                        <button class="nav-link active" name='category' value='documentary'><img height="35" width="35" id="cat-icons" src="/icons/icons8-documentary-64.png"> Documentary
                            <span class="badge badge-pill badge-secondary"><%=ctgCount[3]%></span>
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link active" name='category' value='educational'><img height="35" width="35" id="cat-icons" src="/icons/icons8-learning-50.png"> Educational
                            <span class="badge badge-pill badge-secondary"><%=ctgCount[4]%></span>
                        </button>
                    </li>
                    <li class="nav-item"> 
                        <button class="nav-link active" name='category' value='fitness'><img height="35" width="35" id="cat-icons" src="/icons/icons8-squats-60.png"> Fitness
                            <span class="badge badge-pill badge-secondary"><%=ctgCount[5]%></span>
                        </button>
                    </li>
                    <li class="nav-item"> 
                        <button class="nav-link active" name='category' value='motivational'><img height="35" width="35" id="cat-icons" src="/icons/icons8-syringe-60.png"> Motivational
                            <span class="badge badge-pill badge-secondary"><%=ctgCount[6]%></span>
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link active" name='category' value='music'><img height="35" width="35" id="cat-icons" src="/icons/icons8-music-library-60.png"/> Music
                            <span class="badge badge-pill badge-secondary"><%=ctgCount[7]%></span>
                        </button>
                    </li>
                    <li class="nav-item"> 
                        <button class="nav-link active" name='category' value='beauty'><img height="35" width="35" id="cat-icons" src="/icons/icons8-lipstick-60.png"> Beauty
                            <span class="badge badge-pill badge-secondary"><%=ctgCount[8]%></span>
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link active" name='category' value='gaming'><img height="35" width="35" id="cat-icons" src="/icons/icons8-accuracy-60.png"/> Gaming
                            <span class="badge badge-pill badge-secondary"><%=ctgCount[9]%></span>
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link active" name="category" value='vlog'><img height="35" width="35" id="cat-icons" src="/icons/icons8-selfie-100.png"/> VLOG
                            <span class="badge badge-pill badge-secondary"><%=ctgCount[10]%></span>
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link active" name='category' value='animal'>
                            <img height="35" width="35" id="cat-icons" 
                            src='/icons/icons8-pig-100.png' onmouseover="this.src='/icons/icons8-pinkpig-100.png';" onmouseout="this.src='/icons/icons8-pig-100.png';"/> 
                            Animal
                            <span class="badge badge-pill badge-secondary"><%=ctgCount[11]%></span>
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link active" name='category' value='others'><img height="35" width="35" id="cat-icons" src="/icons/icons8-xd-50.png"/>
                            Others
                            <span class="badge badge-pill badge-secondary"><%=ctgCount[12]%></span>
                        </button>
                    </li>
                </ul>
            </form>
        </div>

        <!-- ========flash npm======== -->
        <div class="flash-box">
            <% if(error && error.length > 0) { %>
                <div style="text-align: center;" class="alert alert-danger"><p><%=error %></p></div>
            <% } %>

            <% if(success && success.length > 0) { %>
                <div style="text-align: center;" class="alert alert-success"><p><%= success %></p></div>
            <% } %>
        </div>

        <!-- MOMENTJS SCRIPT -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>

        <!-- BOOTSTRAP AND SLIM JQUERY SCRIPT -->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

        <!-- =====ckeditor====== -->
        <script src="//cdn.ckeditor.com/4.6.2/standard/ckeditor.js"></script>